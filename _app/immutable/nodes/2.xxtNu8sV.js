import{b as Ye,d as Ue,a as O,c as ue,f as Y}from"../chunks/noX9p_op.js";import"../chunks/DQKGyfje.js";import{o as Ge}from"../chunks/DQHqctkd.js";import{h as k,a as ne,v as J,g as w,J as Ee,w as We,x as je,y as _e,z as K,A as D,F as $,ae as Xe,B as ce,C as q,D as Se,ai as Ne,a9 as Ce,O as B,X as he,aq as ee,a3 as se,ar as qe,as as Ke,at as Je,ah as Qe,au as Ze,av as X,aw as ea,ax as aa,ac as ra,E as ta,ay as ia,_ as la,a0 as na,ak as Te,d as Ie,az as sa,aA as oa,i as fa,aB as ua,aC as ca,aD as da,aE as va,aF as ga,aG as _a,aH as ha,al as ba,p as xe,o as x,s as T,q as R,m as Re,k as de,ap as pa,aI as ma,N as V,t as U,aJ as wa}from"../chunks/Cn8agdEK.js";import{i as ya,a as ka,c as Aa,d as Ea,b as Sa,n as Na,e as Ca,f as Ta,l as Ia,s as be,g as ae}from"../chunks/B0IzcNw_.js";import{l as oe,p as z,s as xa,i as G}from"../chunks/BziKJcof.js";import{i as Oe}from"../chunks/67JrqktC.js";import{s as Le}from"../chunks/DJ0_-DY4.js";function Ra(e,a){return a}function Oa(e,a,r,t){for(var i=[],l=a.length,s=0;s<l;s++)Je(a[s].e,i,!0);var c=l>0&&i.length===0&&r!==null;if(c){var f=r.parentNode;Qe(f),f.append(r),t.clear(),P(e,a[0].prev,a[l-1].next)}Ze(i,()=>{for(var d=0;d<l;d++){var u=a[d];c||(t.delete(u.k),P(e,u.prev,u.next)),X(u.e,!c)}})}function La(e,a,r,t,i,l=null){var s=e,c={flags:a,items:new Map,first:null};k&&ne();var f=null,d=!1,u=Ee(()=>{var o=r();return Ce(o)?o:o==null?[]:Ne(o)});J(()=>{var o=w(u),n=o.length;if(d&&n===0)return;d=n===0;let _=!1;if(k){var g=We(s)===je;g!==(n===0)&&(s=_e(),K(s),D(!1),_=!0)}if(k){for(var p=null,y,v=0;v<n;v++){if($.nodeType===8&&$.data===Xe){s=$,_=!0,D(!1);break}var E=o[v],h=t(E,v);y=Me($,c,p,null,E,h,v,i,a,r),c.items.set(h,y),p=y}n>0&&K(_e())}k||Ma(o,c,s,i,a,t,r),l!==null&&(n===0?f?ce(f):f=q(()=>l(s)):f!==null&&Se(f,()=>{f=null})),_&&D(!0),w(u)}),k&&(s=$)}function Ma(e,a,r,t,i,l,s){var c=e.length,f=a.items,d=a.first,u=d,o,n=null,_=[],g=[],p,y,v,E;for(E=0;E<c;E+=1){if(p=e[E],y=l(p,E),v=f.get(y),v===void 0){var h=u?u.e.nodes_start:r;n=Me(h,a,n,n===null?a.first:n.next,p,y,E,t,i,s),f.set(y,n),_=[],g=[],u=n.next;continue}if(Pa(v,p,E),(v.e.f&ee)!==0&&ce(v.e),v!==u){if(o!==void 0&&o.has(v)){if(_.length<g.length){var b=g[0],m;n=b.prev;var C=_[0],A=_[_.length-1];for(m=0;m<_.length;m+=1)pe(_[m],b,r);for(m=0;m<g.length;m+=1)o.delete(g[m]);P(a,C.prev,A.next),P(a,n,C),P(a,A,b),u=b,n=A,E-=1,_=[],g=[]}else o.delete(v),pe(v,u,r),P(a,v.prev,v.next),P(a,v,n===null?a.first:n.next),P(a,n,v),n=v;continue}for(_=[],g=[];u!==null&&u.k!==y;)(u.e.f&ee)===0&&(o??(o=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;v=u}_.push(v),n=v,u=v.next}if(u!==null||o!==void 0){for(var M=o===void 0?[]:Ne(o);u!==null;)(u.e.f&ee)===0&&M.push(u),u=u.next;var F=M.length;if(F>0){var Q=null;Oa(a,M,Q,f)}}se.first=a.first&&a.first.e,se.last=n&&n.e}function Pa(e,a,r,t){Ke(e.v,a),e.i=r}function Me(e,a,r,t,i,l,s,c,f,d){var u=(f&ea)!==0,o=(f&aa)===0,n=u?o?B(i,!1,!1):he(i):i,_=(f&qe)===0?s:he(s),g={i:_,v:n,k:l,a:null,e:null,prev:r,next:t};try{return g.e=q(()=>c(e,n,_,d),k),g.e.prev=r&&r.e,g.e.next=t&&t.e,r===null?a.first=g:(r.next=g,r.e.next=g.e),t!==null&&(t.prev=g,t.e.prev=g.e),g}finally{}}function pe(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,i=a?a.e.nodes_start:r,l=e.e.nodes_start;l!==t;){var s=ra(l);i.before(l),l=s}}function P(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function $a(e,a,r,t,i,l){let s=k;k&&ne();var c,f,d=null;k&&$.nodeType===1&&(d=$,ne());var u=k?$:e,o;J(()=>{const n=a()||null;var _=ia;n!==c&&(o&&(n===null?Se(o,()=>{o=null,f=null}):n===f?ce(o):X(o)),n&&n!==f&&(o=q(()=>{if(d=k?d:document.createElementNS(_,n),Ye(d,d),t){k&&ya(n)&&d.append(document.createComment(""));var g=k?la(d):d.appendChild(na());k&&(g===null?D(!1):K(g)),t(d,g)}se.nodes_end=d,u.before(d)})),c=n,c&&(f=c))},ta),s&&(D(!0),K(u))}function Ha(e,a){var r=void 0,t;J(()=>{r!==(r=a())&&(t&&(X(t),t=null),r&&(t=q(()=>{Te(()=>r(e))})))})}function Pe(e){var a,r,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(a=0;a<i;a++)e[a]&&(r=Pe(e[a]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}function Ba(){for(var e,a,r=0,t="",i=arguments.length;r<i;r++)(e=arguments[r])&&(a=Pe(e))&&(t&&(t+=" "),t+=a);return t}function Da(e){return typeof e=="object"?Ba(e):e??""}const me=[...` 	
\r\fÂ \v\uFEFF`];function Fa(e,a,r){var t=e==null?"":""+e;if(r){for(var i in r)if(r[i])t=t?t+" "+i:i;else if(t.length)for(var l=i.length,s=0;(s=t.indexOf(i,s))>=0;){var c=s+l;(s===0||me.includes(t[s-1]))&&(c===t.length||me.includes(t[c]))?t=(s===0?"":t.substring(0,s))+t.substring(c+1):s=c}}return t===""?null:t}function we(e,a=!1){var r=a?" !important;":";",t="";for(var i in e){var l=e[i];l!=null&&l!==""&&(t+=" "+i+": "+l+r)}return t}function re(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Va(e,a){if(a){var r="",t,i;if(Array.isArray(a)?(t=a[0],i=a[1]):t=a,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,s=0,c=!1,f=[];t&&f.push(...Object.keys(t).map(re)),i&&f.push(...Object.keys(i).map(re));var d=0,u=-1;const p=e.length;for(var o=0;o<p;o++){var n=e[o];if(c?n==="/"&&e[o-1]==="*"&&(c=!1):l?l===n&&(l=!1):n==="/"&&e[o+1]==="*"?c=!0:n==='"'||n==="'"?l=n:n==="("?s++:n===")"&&s--,!c&&l===!1&&s===0){if(n===":"&&u===-1)u=o;else if(n===";"||o===p-1){if(u!==-1){var _=re(e.substring(d,u).trim());if(!f.includes(_)){n!==";"&&o++;var g=e.substring(d,o).trim();r+=" "+g+";"}}d=o+1,u=-1}}}}return t&&(r+=we(t)),i&&(r+=we(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function za(e,a,r,t,i,l){var s=e.__className;if(k||s!==r||s===void 0){var c=Fa(r,t,l);(!k||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):a?e.className=c:e.setAttribute("class",c)),e.__className=r}else if(l&&i!==l)for(var f in l){var d=!!l[f];(i==null||d!==!!i[f])&&e.classList.toggle(f,d)}return l}function te(e,a={},r,t){for(var i in r){var l=r[i];a[i]!==l&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,l,t))}}function Ya(e,a,r,t){var i=e.__style;if(k||i!==a){var l=Va(a,t);(!k||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=a}else t&&(Array.isArray(t)?(te(e,r==null?void 0:r[0],t[0]),te(e,r==null?void 0:r[1],t[1],"important")):te(e,r,t));return t}function fe(e,a,r){if(e.multiple){if(a==null)return;if(!Ce(a))return sa();for(var t of e.options)t.selected=a.includes(ye(t));return}for(t of e.options){var i=ye(t);if(oa(i,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Ua(e,a){let r=!0;Te(()=>{a&&fe(e,Ie(a),r),r=!1;var t=new MutationObserver(()=>{var i=e.__value;fe(e,i)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ye(e){return"__value"in e?e.__value:e.value}const W=Symbol("class"),j=Symbol("style"),$e=Symbol("is custom element"),He=Symbol("is html");function Ga(e){if(k){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;L(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var i=e.checked;L(e,"checked",null),e.checked=i}}};e.__on_r=r,_a(r),Ta()}}function Wa(e,a){a?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function L(e,a,r,t){var i=Be(e);k&&(i[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||i[a]!==(i[a]=r)&&(a==="loading"&&(e[va]=r),r==null?e.removeAttribute(a):typeof r!="string"&&De(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function ja(e,a,r,t,i=!1){var l=Be(e),s=l[$e],c=!l[He];let f=k&&s;f&&D(!1);var d=a||{},u=e.tagName==="OPTION";for(var o in a)o in r||(r[o]=null);r.class?r.class=Da(r.class):r[W]&&(r.class=null),r[j]&&(r.style??(r.style=null));var n=De(e);for(const h in r){let b=r[h];if(u&&h==="value"&&b==null){e.value=e.__value="",d[h]=b;continue}if(h==="class"){var _=e.namespaceURI==="http://www.w3.org/1999/xhtml";za(e,_,b,t,a==null?void 0:a[W],r[W]),d[h]=b,d[W]=r[W];continue}if(h==="style"){Ya(e,b,a==null?void 0:a[j],r[j]),d[h]=b,d[j]=r[j];continue}var g=d[h];if(b!==g){d[h]=b;var p=h[0]+h[1];if(p!=="$$")if(p==="on"){const m={},C="$$"+h;let A=h.slice(2);var y=Ca(A);if(ka(A)&&(A=A.slice(0,-7),m.capture=!0),!y&&g){if(b!=null)continue;e.removeEventListener(A,d[C],m),d[C]=null}if(b!=null)if(y)e[`__${A}`]=b,Ea([A]);else{let M=function(F){d[h].call(this,F)};d[C]=Aa(A,e,M,m)}else y&&(e[`__${A}`]=void 0)}else if(h==="style")L(e,h,b);else if(h==="autofocus")Sa(e,!!b);else if(!s&&(h==="__value"||h==="value"&&b!=null))e.value=e.__value=b;else if(h==="selected"&&u)Wa(e,b);else{var v=h;c||(v=Na(v));var E=v==="defaultValue"||v==="defaultChecked";if(b==null&&!s&&!E)if(l[h]=null,v==="value"||v==="checked"){let m=e;const C=a===void 0;if(v==="value"){let A=m.defaultValue;m.removeAttribute(v),m.defaultValue=A,m.value=m.__value=C?A:null}else{let A=m.defaultChecked;m.removeAttribute(v),m.defaultChecked=A,m.checked=C?A:!1}}else e.removeAttribute(h);else E||n.includes(v)&&(s||typeof b!="string")?e[v]=b:typeof b!="function"&&L(e,v,b)}}}return f&&D(!0),d}function ke(e,a,r=[],t,i=!1,l=fa){const s=r.map(l);var c=void 0,f={},d=e.nodeName==="SELECT",u=!1;J(()=>{var o=a(...s.map(w));ja(e,c,o,t,i),u&&d&&"value"in o&&fe(e,o.value,!1);for(let _ of Object.getOwnPropertySymbols(f))o[_]||X(f[_]);for(let _ of Object.getOwnPropertySymbols(o)){var n=o[_];_.description===ua&&(!c||n!==c[_])&&(f[_]&&X(f[_]),f[_]=q(()=>Ha(e,()=>n)))}c=o}),d&&Ua(e,()=>c.value),u=!0}function Be(e){return e.__attributes??(e.__attributes={[$e]:e.nodeName.includes("-"),[He]:e.namespaceURI===ca})}var Ae=new Map;function De(e){var a=Ae.get(e.nodeName);if(a)return a;Ae.set(e.nodeName,a=[]);for(var r,t=e,i=Element.prototype;i!==t;){r=ga(t);for(var l in r)r[l].set&&a.push(l);t=da(t)}return a}function Xa(e,a,r=a){var t=ha();Ia(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=ie(e)?le(l):l,r(l),t&&l!==(l=a())){var s=e.selectionStart,c=e.selectionEnd;e.value=l??"",c!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(c,e.value.length))}}),(k&&e.defaultValue!==e.value||Ie(a)==null&&e.value)&&r(ie(e)?le(e.value):e.value),ba(()=>{var i=a();ie(e)&&i===le(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ie(e){var a=e.type;return a==="number"||a==="range"}function le(e){return e===""?null:+e}/**
 * @license lucide-svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const qa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ka=Ue("<svg><!><!></svg>");function Ja(e,a){const r=oe(a,["children","$$slots","$$events","$$legacy"]),t=oe(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);xe(a,!1);let i=z(a,"name",8,void 0),l=z(a,"color",8,"currentColor"),s=z(a,"size",8,24),c=z(a,"strokeWidth",8,2),f=z(a,"absoluteStrokeWidth",8,!1),d=z(a,"iconNode",24,()=>[]);const u=(...g)=>g.filter((p,y,v)=>!!p&&v.indexOf(p)===y).join(" ");Oe();var o=Ka();ke(o,(g,p)=>({...qa,...t,width:s(),height:s(),stroke:l(),"stroke-width":g,class:p}),[()=>f()?Number(c())*24/Number(s()):c(),()=>u("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)]);var n=x(o);La(n,1,d,Ra,(g,p)=>{var y=pa(()=>ma(w(p),2));let v=()=>w(y)[0],E=()=>w(y)[1];var h=ue(),b=de(h);$a(b,v,!0,(m,C)=>{ke(m,()=>({...E()}))}),O(g,h)});var _=T(n);Le(_,a,"default",{}),R(o),O(e,o),Re()}function Qa(e,a){const r=oe(a,["children","$$slots","$$events","$$legacy"]),t=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];Ja(e,xa({name:"settings"},()=>r,{get iconNode(){return t},children:(i,l)=>{var s=ue(),c=de(s);Le(c,a,"default",{}),O(i,s)},$$slots:{default:!0}}))}var Za=Y('<div class="mb-4 p-4 rounded-md border border-gray-600 bg-gray-700"><label class="block text-sm mb-1"> </label> <input type="range" min="0" max="1" step="0.01" class="w-full"/></div>'),er=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Cleaned</h2> <img alt="Cleaned" class="rounded border border-gray-500"/> <a download="cleaned.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),ar=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Outer Outline</h2> <img alt="Outer Outline" class="rounded border border-gray-500"/> <a download="outer.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),rr=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Full Detail</h2> <img alt="Full Detail" class="rounded border border-gray-500"/> <a download="full.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),tr=Y('<main class="min-h-screen bg-gray-800 text-white dark:bg-gray-800 dark:text-white px-4 py-8"><div class="relative max-w-xl mx-auto"><button class="absolute top-0 right-0 p-2"><!></button> <div class="flex items-center mb-1"><img src="/icon.png" alt="Inkerly logo" class="h-10 w-10 rounded-full border-2 border-white mr-2 p-1"/> <h1 class="text-3xl font-bold text-pink-500">Inkerly</h1></div> <p class="text-gray-300 mb-6">Your portable tattoo stencil studio</p> <!> <input type="file" accept="image/*" class="block w-full text-sm mb-4 text-white bg-gray-700 border border-gray-600 rounded-lg p-2 cursor-pointer file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-600 file:text-white hover:file:bg-pink-500"/> <button class="w-full text-white bg-pink-600 hover:bg-pink-500 font-semibold py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"> </button> <div class="mt-8 space-y-8"><!> <!> <!></div></div></main>'),ir=Y('<div class="flex items-center justify-center min-h-screen bg-gray-800 text-white"><div class="text-center"><svg class="animate-spin h-12 w-12 text-pink-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> <p class="text-pink-400 font-medium">Loading Inkerly stencil engineâ¦</p></div></div>');function vr(e,a){xe(a,!1);let r,t=B(null),i=B(.5),l=B(!1),s=B(!1),c=B(!1),f=B({cleaned:"",outer:"",full:""});Ge(async()=>{r=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"}),await r.loadPackage(["opencv-python"]),V(c,!0)});async function d(){if(!w(t)||!r)return;V(l,!0);const g=await w(t).arrayBuffer();r.FS.writeFile("in.png",new Uint8Array(g));const p=`
import cv2
import numpy as np

# Load image with alpha (if present), fallback to BGR
image = cv2.imread('in.png')
image_gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

# Threshold to separate background
_, mask = cv2.threshold(image_gray, 250, 255, cv2.THRESH_BINARY)
mask_inv = cv2.bitwise_not(mask)

# White background
white_bg = np.full(image.shape, 255, dtype=np.uint8)

# Keep only subject from original image
fg = cv2.bitwise_and(image, image, mask=mask_inv)

# Combine subject with white background
cleaned = cv2.add(fg, cv2.bitwise_and(white_bg, white_bg, mask=mask))

# Save cleaned image
_, buf_cleaned = cv2.imencode('.png', cleaned)
with open('out_cleaned.png', 'wb') as f: f.write(buf_cleaned)

# Continue with stencil generation
_, bw = cv2.threshold(image_gray, int(${w(i)} * 255), 255, cv2.THRESH_BINARY_INV)
contours_ext, _ = cv2.findContours(bw, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
contours_all, _ = cv2.findContours(bw, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

def draw(contours):
    canvas = np.ones_like(image_gray) * 255
    cv2.drawContours(canvas, contours, -1, 0, 1)
    _, buf = cv2.imencode('.png', canvas)
    return buf.tobytes()

outer = draw(contours_ext)
full = draw(contours_all)

with open('out_outer.png', 'wb') as f: f.write(outer)
with open('out_full.png', 'wb') as f: f.write(full)
`;await r.runPythonAsync(p),["cleaned","outer","full"].forEach(y=>{const v=r.FS.readFile(`out_${y}.png`);wa(f,w(f)[y]=URL.createObjectURL(new Blob([v],{type:"image/png"})))}),V(l,!1)}Oe();var u=ue(),o=de(u);{var n=g=>{var p=tr(),y=x(p),v=x(y),E=x(v);Qa(E,{class:"w-6 h-6 text-pink-500 hover:text-pink-400"}),R(v);var h=T(v,6);{var b=N=>{var S=Za(),I=x(S),H=x(I);R(I);var ge=T(I,2);Ga(ge),R(S),U(Z=>be(H,`Stencil Detail: ${Z??""}%`),[()=>Math.round(w(i)*100)],Ee),Xa(ge,()=>w(i),Z=>V(i,Z)),O(N,S)};G(h,N=>{w(s)&&N(b)})}var m=T(h,2),C=T(m,2),A=x(C,!0);R(C);var M=T(C,2),F=x(M);{var Q=N=>{var S=er(),I=T(x(S),2),H=T(I,2);R(S),U(()=>{L(I,"src",w(f).cleaned),L(H,"href",w(f).cleaned)}),O(N,S)};G(F,N=>{w(f).cleaned&&N(Q)})}var ve=T(F,2);{var Fe=N=>{var S=ar(),I=T(x(S),2),H=T(I,2);R(S),U(()=>{L(I,"src",w(f).outer),L(H,"href",w(f).outer)}),O(N,S)};G(ve,N=>{w(f).outer&&N(Fe)})}var Ve=T(ve,2);{var ze=N=>{var S=rr(),I=T(x(S),2),H=T(I,2);R(S),U(()=>{L(I,"src",w(f).full),L(H,"href",w(f).full)}),O(N,S)};G(Ve,N=>{w(f).full&&N(ze)})}R(M),R(y),R(p),U(()=>{C.disabled=!w(t)||w(l),be(A,w(l)?"Processing...":"Generate Stencils")}),ae("click",v,()=>V(s,!w(s))),ae("change",m,N=>{var S;return V(t,((S=N.target.files)==null?void 0:S[0])??null)}),ae("click",C,d),O(g,p)},_=g=>{var p=ir();O(g,p)};G(o,g=>{w(c)?g(n):g(_,!1)})}O(e,u),Re()}export{vr as component};
