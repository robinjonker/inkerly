import{b as Ue,d as We,a as M,c as ue,f as F}from"../chunks/BmA1Nmq3.js";import"../chunks/CKglbBBL.js";import{o as Ge}from"../chunks/BTUopf_F.js";import{h as A,a as ne,q as Z,g as w,I as Se,v as qe,w as Xe,x as he,y as J,z as D,D as $,ad as Ke,A as ce,B as X,C as Ne,ah as Ce,a8 as Te,N as B,W as be,ap as ee,a0 as se,aq as Je,ar as Ze,as as Qe,ag as ea,at as aa,au as q,av as ra,aw as ta,ab as ia,E as la,ax as na,_ as sa,Z as oa,aj as Ie,d as xe,ay as fa,az as ua,i as ca,aA as da,aB as va,aC as ga,aD as _a,aE as ha,aF as ba,aG as pa,ak as ma,p as Re,n as x,s as C,o as R,m as Oe,k as de,ao as wa,aH as ya,M as V,aI as ka,t as Y,aJ as Aa}from"../chunks/Lf7zu9sv.js";import{i as Ea,a as Sa,c as Na,d as Ca,b as Ta,n as Ia,e as xa,f as Ra,l as Oa,s as pe,g as ae}from"../chunks/CABOKw2j.js";import{l as oe,p as z,s as La,i as U}from"../chunks/fLWVTy__.js";import{i as Le}from"../chunks/D1U-d_4o.js";import{b as Ma}from"../chunks/EQRI7Fsx.js";import{s as Me}from"../chunks/DnbJM5yK.js";function Pa(e,a){return a}function $a(e,a,r,t){for(var i=[],l=a.length,s=0;s<l;s++)Qe(a[s].e,i,!0);var c=l>0&&i.length===0&&r!==null;if(c){var f=r.parentNode;ea(f),f.append(r),t.clear(),P(e,a[0].prev,a[l-1].next)}aa(i,()=>{for(var d=0;d<l;d++){var u=a[d];c||(t.delete(u.k),P(e,u.prev,u.next)),q(u.e,!c)}})}function Ha(e,a,r,t,i,l=null){var s=e,c={flags:a,items:new Map,first:null};A&&ne();var f=null,d=!1,u=Se(()=>{var o=r();return Te(o)?o:o==null?[]:Ce(o)});Z(()=>{var o=w(u),n=o.length;if(d&&n===0)return;d=n===0;let _=!1;if(A){var g=qe(s)===Xe;g!==(n===0)&&(s=he(),J(s),D(!1),_=!0)}if(A){for(var p=null,y,v=0;v<n;v++){if($.nodeType===8&&$.data===Ke){s=$,_=!0,D(!1);break}var E=o[v],h=t(E,v);y=Pe($,c,p,null,E,h,v,i,a,r),c.items.set(h,y),p=y}n>0&&J(he())}A||Ba(o,c,s,i,a,t,r),l!==null&&(n===0?f?ce(f):f=X(()=>l(s)):f!==null&&Ne(f,()=>{f=null})),_&&D(!0),w(u)}),A&&(s=$)}function Ba(e,a,r,t,i,l,s){var c=e.length,f=a.items,d=a.first,u=d,o,n=null,_=[],g=[],p,y,v,E;for(E=0;E<c;E+=1){if(p=e[E],y=l(p,E),v=f.get(y),v===void 0){var h=u?u.e.nodes_start:r;n=Pe(h,a,n,n===null?a.first:n.next,p,y,E,t,i,s),f.set(y,n),_=[],g=[],u=n.next;continue}if(Da(v,p,E),(v.e.f&ee)!==0&&ce(v.e),v!==u){if(o!==void 0&&o.has(v)){if(_.length<g.length){var b=g[0],m;n=b.prev;var T=_[0],k=_[_.length-1];for(m=0;m<_.length;m+=1)me(_[m],b,r);for(m=0;m<g.length;m+=1)o.delete(g[m]);P(a,T.prev,k.next),P(a,n,T),P(a,k,b),u=b,n=k,E-=1,_=[],g=[]}else o.delete(v),me(v,u,r),P(a,v.prev,v.next),P(a,v,n===null?a.first:n.next),P(a,n,v),n=v;continue}for(_=[],g=[];u!==null&&u.k!==y;)(u.e.f&ee)===0&&(o??(o=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;v=u}_.push(v),n=v,u=v.next}if(u!==null||o!==void 0){for(var O=o===void 0?[]:Ce(o);u!==null;)(u.e.f&ee)===0&&O.push(u),u=u.next;var j=O.length;if(j>0){var K=null;$a(a,O,K,f)}}se.first=a.first&&a.first.e,se.last=n&&n.e}function Da(e,a,r,t){Ze(e.v,a),e.i=r}function Pe(e,a,r,t,i,l,s,c,f,d){var u=(f&ra)!==0,o=(f&ta)===0,n=u?o?B(i,!1,!1):be(i):i,_=(f&Je)===0?s:be(s),g={i:_,v:n,k:l,a:null,e:null,prev:r,next:t};try{return g.e=X(()=>c(e,n,_,d),A),g.e.prev=r&&r.e,g.e.next=t&&t.e,r===null?a.first=g:(r.next=g,r.e.next=g.e),t!==null&&(t.prev=g,t.e.prev=g.e),g}finally{}}function me(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,i=a?a.e.nodes_start:r,l=e.e.nodes_start;l!==t;){var s=ia(l);i.before(l),l=s}}function P(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Va(e,a,r,t,i,l){let s=A;A&&ne();var c,f,d=null;A&&$.nodeType===1&&(d=$,ne());var u=A?$:e,o;Z(()=>{const n=a()||null;var _=na;n!==c&&(o&&(n===null?Ne(o,()=>{o=null,f=null}):n===f?ce(o):q(o)),n&&n!==f&&(o=X(()=>{if(d=A?d:document.createElementNS(_,n),Ue(d,d),t){A&&Ea(n)&&d.append(document.createComment(""));var g=A?sa(d):d.appendChild(oa());A&&(g===null?D(!1):J(g)),t(d,g)}se.nodes_end=d,u.before(d)})),c=n,c&&(f=c))},la),s&&(D(!0),J(u))}function za(e,a){var r=void 0,t;Z(()=>{r!==(r=a())&&(t&&(q(t),t=null),r&&(t=X(()=>{Ie(()=>r(e))})))})}function $e(e){var a,r,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(a=0;a<i;a++)e[a]&&(r=$e(e[a]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}function Fa(){for(var e,a,r=0,t="",i=arguments.length;r<i;r++)(e=arguments[r])&&(a=$e(e))&&(t&&(t+=" "),t+=a);return t}function ja(e){return typeof e=="object"?Fa(e):e??""}const we=[...` 	
\r\fÂ \v\uFEFF`];function Ya(e,a,r){var t=e==null?"":""+e;if(r){for(var i in r)if(r[i])t=t?t+" "+i:i;else if(t.length)for(var l=i.length,s=0;(s=t.indexOf(i,s))>=0;){var c=s+l;(s===0||we.includes(t[s-1]))&&(c===t.length||we.includes(t[c]))?t=(s===0?"":t.substring(0,s))+t.substring(c+1):s=c}}return t===""?null:t}function ye(e,a=!1){var r=a?" !important;":";",t="";for(var i in e){var l=e[i];l!=null&&l!==""&&(t+=" "+i+": "+l+r)}return t}function re(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Ua(e,a){if(a){var r="",t,i;if(Array.isArray(a)?(t=a[0],i=a[1]):t=a,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,s=0,c=!1,f=[];t&&f.push(...Object.keys(t).map(re)),i&&f.push(...Object.keys(i).map(re));var d=0,u=-1;const p=e.length;for(var o=0;o<p;o++){var n=e[o];if(c?n==="/"&&e[o-1]==="*"&&(c=!1):l?l===n&&(l=!1):n==="/"&&e[o+1]==="*"?c=!0:n==='"'||n==="'"?l=n:n==="("?s++:n===")"&&s--,!c&&l===!1&&s===0){if(n===":"&&u===-1)u=o;else if(n===";"||o===p-1){if(u!==-1){var _=re(e.substring(d,u).trim());if(!f.includes(_)){n!==";"&&o++;var g=e.substring(d,o).trim();r+=" "+g+";"}}d=o+1,u=-1}}}}return t&&(r+=ye(t)),i&&(r+=ye(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Wa(e,a,r,t,i,l){var s=e.__className;if(A||s!==r||s===void 0){var c=Ya(r,t,l);(!A||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):a?e.className=c:e.setAttribute("class",c)),e.__className=r}else if(l&&i!==l)for(var f in l){var d=!!l[f];(i==null||d!==!!i[f])&&e.classList.toggle(f,d)}return l}function te(e,a={},r,t){for(var i in r){var l=r[i];a[i]!==l&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,l,t))}}function Ga(e,a,r,t){var i=e.__style;if(A||i!==a){var l=Ua(a,t);(!A||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=a}else t&&(Array.isArray(t)?(te(e,r==null?void 0:r[0],t[0]),te(e,r==null?void 0:r[1],t[1],"important")):te(e,r,t));return t}function fe(e,a,r){if(e.multiple){if(a==null)return;if(!Te(a))return fa();for(var t of e.options)t.selected=a.includes(ke(t));return}for(t of e.options){var i=ke(t);if(ua(i,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function qa(e,a){let r=!0;Ie(()=>{a&&fe(e,xe(a),r),r=!1;var t=new MutationObserver(()=>{var i=e.__value;fe(e,i)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ke(e){return"__value"in e?e.__value:e.value}const W=Symbol("class"),G=Symbol("style"),He=Symbol("is custom element"),Be=Symbol("is html");function Xa(e){if(A){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;L(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var i=e.checked;L(e,"checked",null),e.checked=i}}};e.__on_r=r,ba(r),Ra()}}function Ka(e,a){a?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function L(e,a,r,t){var i=De(e);A&&(i[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||i[a]!==(i[a]=r)&&(a==="loading"&&(e[_a]=r),r==null?e.removeAttribute(a):typeof r!="string"&&Ve(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Ja(e,a,r,t,i=!1){var l=De(e),s=l[He],c=!l[Be];let f=A&&s;f&&D(!1);var d=a||{},u=e.tagName==="OPTION";for(var o in a)o in r||(r[o]=null);r.class?r.class=ja(r.class):r[W]&&(r.class=null),r[G]&&(r.style??(r.style=null));var n=Ve(e);for(const h in r){let b=r[h];if(u&&h==="value"&&b==null){e.value=e.__value="",d[h]=b;continue}if(h==="class"){var _=e.namespaceURI==="http://www.w3.org/1999/xhtml";Wa(e,_,b,t,a==null?void 0:a[W],r[W]),d[h]=b,d[W]=r[W];continue}if(h==="style"){Ga(e,b,a==null?void 0:a[G],r[G]),d[h]=b,d[G]=r[G];continue}var g=d[h];if(b!==g){d[h]=b;var p=h[0]+h[1];if(p!=="$$")if(p==="on"){const m={},T="$$"+h;let k=h.slice(2);var y=xa(k);if(Sa(k)&&(k=k.slice(0,-7),m.capture=!0),!y&&g){if(b!=null)continue;e.removeEventListener(k,d[T],m),d[T]=null}if(b!=null)if(y)e[`__${k}`]=b,Ca([k]);else{let O=function(j){d[h].call(this,j)};d[T]=Na(k,e,O,m)}else y&&(e[`__${k}`]=void 0)}else if(h==="style")L(e,h,b);else if(h==="autofocus")Ta(e,!!b);else if(!s&&(h==="__value"||h==="value"&&b!=null))e.value=e.__value=b;else if(h==="selected"&&u)Ka(e,b);else{var v=h;c||(v=Ia(v));var E=v==="defaultValue"||v==="defaultChecked";if(b==null&&!s&&!E)if(l[h]=null,v==="value"||v==="checked"){let m=e;const T=a===void 0;if(v==="value"){let k=m.defaultValue;m.removeAttribute(v),m.defaultValue=k,m.value=m.__value=T?k:null}else{let k=m.defaultChecked;m.removeAttribute(v),m.defaultChecked=k,m.checked=T?k:!1}}else e.removeAttribute(h);else E||n.includes(v)&&(s||typeof b!="string")?e[v]=b:typeof b!="function"&&L(e,v,b)}}}return f&&D(!0),d}function Ae(e,a,r=[],t,i=!1,l=ca){const s=r.map(l);var c=void 0,f={},d=e.nodeName==="SELECT",u=!1;Z(()=>{var o=a(...s.map(w));Ja(e,c,o,t,i),u&&d&&"value"in o&&fe(e,o.value,!1);for(let _ of Object.getOwnPropertySymbols(f))o[_]||q(f[_]);for(let _ of Object.getOwnPropertySymbols(o)){var n=o[_];_.description===da&&(!c||n!==c[_])&&(f[_]&&q(f[_]),f[_]=X(()=>za(e,()=>n)))}c=o}),d&&qa(e,()=>c.value),u=!0}function De(e){return e.__attributes??(e.__attributes={[He]:e.nodeName.includes("-"),[Be]:e.namespaceURI===va})}var Ee=new Map;function Ve(e){var a=Ee.get(e.nodeName);if(a)return a;Ee.set(e.nodeName,a=[]);for(var r,t=e,i=Element.prototype;i!==t;){r=ha(t);for(var l in r)r[l].set&&a.push(l);t=ga(t)}return a}function Za(e,a,r=a){var t=pa();Oa(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=ie(e)?le(l):l,r(l),t&&l!==(l=a())){var s=e.selectionStart,c=e.selectionEnd;e.value=l??"",c!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(c,e.value.length))}}),(A&&e.defaultValue!==e.value||xe(a)==null&&e.value)&&r(ie(e)?le(e.value):e.value),ma(()=>{var i=a();ie(e)&&i===le(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ie(e){var a=e.type;return a==="number"||a==="range"}function le(e){return e===""?null:+e}const Qa=!0,mr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qa},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const er={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ar=We("<svg><!><!></svg>");function rr(e,a){const r=oe(a,["children","$$slots","$$events","$$legacy"]),t=oe(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Re(a,!1);let i=z(a,"name",8,void 0),l=z(a,"color",8,"currentColor"),s=z(a,"size",8,24),c=z(a,"strokeWidth",8,2),f=z(a,"absoluteStrokeWidth",8,!1),d=z(a,"iconNode",24,()=>[]);const u=(...g)=>g.filter((p,y,v)=>!!p&&v.indexOf(p)===y).join(" ");Le();var o=ar();Ae(o,(g,p)=>({...er,...t,width:s(),height:s(),stroke:l(),"stroke-width":g,class:p}),[()=>f()?Number(c())*24/Number(s()):c(),()=>u("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)]);var n=x(o);Ha(n,1,d,Pa,(g,p)=>{var y=wa(()=>ya(w(p),2));let v=()=>w(y)[0],E=()=>w(y)[1];var h=ue(),b=de(h);Va(b,v,!0,(m,T)=>{Ae(m,()=>({...E()}))}),M(g,h)});var _=C(n);Me(_,a,"default",{}),R(o),M(e,o),Oe()}function tr(e,a){const r=oe(a,["children","$$slots","$$events","$$legacy"]),t=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];rr(e,La({name:"settings"},()=>r,{get iconNode(){return t},children:(i,l)=>{var s=ue(),c=de(s);Me(c,a,"default",{}),M(i,s)},$$slots:{default:!0}}))}var ir=F('<div class="mb-4 p-4 rounded-md border border-gray-600 bg-gray-700"><label class="block text-sm mb-1"> </label> <input type="range" min="0" max="1" step="0.01" class="w-full"/></div>'),lr=F('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Cleaned</h2> <img alt="Cleaned" class="rounded border border-gray-500"/> <a download="cleaned.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),nr=F('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Outer Outline</h2> <img alt="Outer Outline" class="rounded border border-gray-500"/> <a download="outer.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),sr=F('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Full Detail</h2> <img alt="Full Detail" class="rounded border border-gray-500"/> <a download="full.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open Inâ¦</a></div>'),or=F('<main class="min-h-screen bg-gray-800 text-white dark:bg-gray-800 dark:text-white px-4 py-8"><div class="relative max-w-xl mx-auto"><button class="absolute top-0 right-0 p-2"><!></button> <div class="flex items-center mb-1"><img alt="Inkerly logo" class="h-10 w-10 rounded-full border-2 border-white mr-2 p-1"/> <h1 class="text-3xl font-bold text-pink-500">Inkerly</h1></div> <p class="text-gray-300 mb-6">Your portable tattoo stencil studio</p> <!> <input type="file" accept="image/*" class="block w-full text-sm mb-4 text-white bg-gray-700 border border-gray-600 rounded-lg p-2 cursor-pointer file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-600 file:text-white hover:file:bg-pink-500"/> <button class="w-full text-white bg-pink-600 hover:bg-pink-500 font-semibold py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"> </button> <div class="mt-8 space-y-8"><!> <!> <!></div></div></main>'),fr=F('<div class="flex items-center justify-center min-h-screen bg-gray-800 text-white"><div class="text-center"><svg class="animate-spin h-12 w-12 text-pink-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> <p class="text-pink-400 font-medium">Loading Inkerly stencil engineâ¦</p></div></div>');function wr(e,a){Re(a,!1);let r,t=B(null),i=B(.5),l=B(!1),s=B(!1),c=B(!1),f=B({cleaned:"",outer:"",full:""});Ge(async()=>{r=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"}),await r.loadPackage(["opencv-python"]),V(c,!0)});async function d(){if(!w(t)||!r)return;V(l,!0);const g=await w(t).arrayBuffer();r.FS.writeFile("in.png",new Uint8Array(g));const p=`
import cv2
import numpy as np

# Load image with alpha (if present), fallback to BGR
image = cv2.imread('in.png')
image_gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

# Threshold to separate background
_, mask = cv2.threshold(image_gray, 250, 255, cv2.THRESH_BINARY)
mask_inv = cv2.bitwise_not(mask)

# White background
white_bg = np.full(image.shape, 255, dtype=np.uint8)

# Keep only subject from original image
fg = cv2.bitwise_and(image, image, mask=mask_inv)

# Combine subject with white background
cleaned = cv2.add(fg, cv2.bitwise_and(white_bg, white_bg, mask=mask))

# Save cleaned image
_, buf_cleaned = cv2.imencode('.png', cleaned)
with open('out_cleaned.png', 'wb') as f: f.write(buf_cleaned)

# Continue with stencil generation
_, bw = cv2.threshold(image_gray, int(${w(i)} * 255), 255, cv2.THRESH_BINARY_INV)
contours_ext, _ = cv2.findContours(bw, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
contours_all, _ = cv2.findContours(bw, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

def draw(contours):
    canvas = np.ones_like(image_gray) * 255
    cv2.drawContours(canvas, contours, -1, 0, 1)
    _, buf = cv2.imencode('.png', canvas)
    return buf.tobytes()

outer = draw(contours_ext)
full = draw(contours_all)

with open('out_outer.png', 'wb') as f: f.write(outer)
with open('out_full.png', 'wb') as f: f.write(full)
`;await r.runPythonAsync(p),["cleaned","outer","full"].forEach(y=>{const v=r.FS.readFile(`out_${y}.png`);Aa(f,w(f)[y]=URL.createObjectURL(new Blob([v],{type:"image/png"})))}),V(l,!1)}Le();var u=ue(),o=de(u);{var n=g=>{var p=or(),y=x(p),v=x(y),E=x(v);tr(E,{class:"w-6 h-6 text-pink-500 hover:text-pink-400"}),R(v);var h=C(v,2),b=x(h);ka(2),R(h);var m=C(h,4);{var T=N=>{var S=ir(),I=x(S),H=x(I);R(I);var _e=C(I,2);Xa(_e),R(S),Y(Q=>pe(H,`Stencil Detail: ${Q??""}%`),[()=>Math.round(w(i)*100)],Se),Za(_e,()=>w(i),Q=>V(i,Q)),M(N,S)};U(m,N=>{w(s)&&N(T)})}var k=C(m,2),O=C(k,2),j=x(O,!0);R(O);var K=C(O,2),ve=x(K);{var ze=N=>{var S=lr(),I=C(x(S),2),H=C(I,2);R(S),Y(()=>{L(I,"src",w(f).cleaned),L(H,"href",w(f).cleaned)}),M(N,S)};U(ve,N=>{w(f).cleaned&&N(ze)})}var ge=C(ve,2);{var Fe=N=>{var S=nr(),I=C(x(S),2),H=C(I,2);R(S),Y(()=>{L(I,"src",w(f).outer),L(H,"href",w(f).outer)}),M(N,S)};U(ge,N=>{w(f).outer&&N(Fe)})}var je=C(ge,2);{var Ye=N=>{var S=sr(),I=C(x(S),2),H=C(I,2);R(S),Y(()=>{L(I,"src",w(f).full),L(H,"href",w(f).full)}),M(N,S)};U(je,N=>{w(f).full&&N(Ye)})}R(K),R(y),R(p),Y(()=>{L(b,"src",`${Ma??""}/icon.png`),O.disabled=!w(t)||w(l),pe(j,w(l)?"Processing...":"Generate Stencils")}),ae("click",v,()=>V(s,!w(s))),ae("change",k,N=>{var S;return V(t,((S=N.target.files)==null?void 0:S[0])??null)}),ae("click",O,d),M(g,p)},_=g=>{var p=fr();M(g,p)};U(o,g=>{w(c)?g(n):g(_,!1)})}M(e,u),Oe()}export{wr as component,mr as universal};
