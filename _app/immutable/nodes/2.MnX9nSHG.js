import{b as Ze,d as Qe,a as L,c as ve,f as Y}from"../chunks/BmA1Nmq3.js";import"../chunks/CKglbBBL.js";import{o as ea}from"../chunks/BTUopf_F.js";import{h as A,a as fe,q as Z,g as p,I as Ie,v as aa,w as ra,x as we,y as J,z as F,D as B,ad as ta,A as _e,B as K,C as Re,ah as Oe,a8 as Le,N as P,W as ye,ap as re,a0 as ue,aq as ia,ar as la,as as sa,ag as na,at as oa,au as X,av as fa,aw as ua,ab as ca,E as da,ax as va,_ as _a,Z as ga,aj as Me,d as $e,ay as ha,az as ba,i as pa,aA as ma,aB as wa,aC as ya,aD as ka,aE as Aa,aF as Ea,aG as Sa,ak as Na,p as Pe,n as C,s as x,o as I,m as He,k as ge,ao as xa,aH as Ta,M as z,aI as Ca,t as j,aJ as Ia}from"../chunks/Lf7zu9sv.js";import{i as Ra,a as Oa,c as La,d as Ma,b as $a,n as Pa,e as Ha,f as Ba,l as Da,s as te,g as ie}from"../chunks/CABOKw2j.js";import{l as ce,p as V,s as za,i as W}from"../chunks/fLWVTy__.js";import{i as Be}from"../chunks/D1U-d_4o.js";import{b as Fa}from"../chunks/Cs64r9fW.js";import{s as De}from"../chunks/DnbJM5yK.js";function Va(e,a){return a}function Ya(e,a,r,t){for(var i=[],l=a.length,n=0;n<l;n++)sa(a[n].e,i,!0);var u=l>0&&i.length===0&&r!==null;if(u){var v=r.parentNode;na(v),v.append(r),t.clear(),H(e,a[0].prev,a[l-1].next)}oa(i,()=>{for(var s=0;s<l;s++){var c=a[s];u||(t.delete(c.k),H(e,c.prev,c.next)),X(c.e,!u)}})}function Ua(e,a,r,t,i,l=null){var n=e,u={flags:a,items:new Map,first:null};A&&fe();var v=null,s=!1,c=Ie(()=>{var f=r();return Le(f)?f:f==null?[]:Oe(f)});Z(()=>{var f=p(c),o=f.length;if(s&&o===0)return;s=o===0;let _=!1;if(A){var g=aa(n)===ra;g!==(o===0)&&(n=we(),J(n),F(!1),_=!0)}if(A){for(var m=null,w,d=0;d<o;d++){if(B.nodeType===8&&B.data===ta){n=B,_=!0,F(!1);break}var k=f[d],h=t(k,d);w=ze(B,u,m,null,k,h,d,i,a,r),u.items.set(h,w),m=w}o>0&&J(we())}A||ja(f,u,n,i,a,t,r),l!==null&&(o===0?v?_e(v):v=K(()=>l(n)):v!==null&&Re(v,()=>{v=null})),_&&F(!0),p(c)}),A&&(n=B)}function ja(e,a,r,t,i,l,n){var u=e.length,v=a.items,s=a.first,c=s,f,o=null,_=[],g=[],m,w,d,k;for(k=0;k<u;k+=1){if(m=e[k],w=l(m,k),d=v.get(w),d===void 0){var h=c?c.e.nodes_start:r;o=ze(h,a,o,o===null?a.first:o.next,m,w,k,t,i,n),v.set(w,o),_=[],g=[],c=o.next;continue}if(Wa(d,m,k),(d.e.f&re)!==0&&_e(d.e),d!==c){if(f!==void 0&&f.has(d)){if(_.length<g.length){var b=g[0],y;o=b.prev;var T=_[0],E=_[_.length-1];for(y=0;y<_.length;y+=1)ke(_[y],b,r);for(y=0;y<g.length;y+=1)f.delete(g[y]);H(a,T.prev,E.next),H(a,o,T),H(a,E,b),c=b,o=E,k-=1,_=[],g=[]}else f.delete(d),ke(d,c,r),H(a,d.prev,d.next),H(a,d,o===null?a.first:o.next),H(a,o,d),o=d;continue}for(_=[],g=[];c!==null&&c.k!==w;)(c.e.f&re)===0&&(f??(f=new Set)).add(c),g.push(c),c=c.next;if(c===null)continue;d=c}_.push(d),o=d,c=d.next}if(c!==null||f!==void 0){for(var $=f===void 0?[]:Oe(f);c!==null;)(c.e.f&re)===0&&$.push(c),c=c.next;var M=$.length;if(M>0){var Q=null;Ya(a,$,Q,v)}}ue.first=a.first&&a.first.e,ue.last=o&&o.e}function Wa(e,a,r,t){la(e.v,a),e.i=r}function ze(e,a,r,t,i,l,n,u,v,s){var c=(v&fa)!==0,f=(v&ua)===0,o=c?f?P(i,!1,!1):ye(i):i,_=(v&ia)===0?n:ye(n),g={i:_,v:o,k:l,a:null,e:null,prev:r,next:t};try{return g.e=K(()=>u(e,o,_,s),A),g.e.prev=r&&r.e,g.e.next=t&&t.e,r===null?a.first=g:(r.next=g,r.e.next=g.e),t!==null&&(t.prev=g,t.e.prev=g.e),g}finally{}}function ke(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,i=a?a.e.nodes_start:r,l=e.e.nodes_start;l!==t;){var n=ca(l);i.before(l),l=n}}function H(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ga(e,a,r,t,i,l){let n=A;A&&fe();var u,v,s=null;A&&B.nodeType===1&&(s=B,fe());var c=A?B:e,f;Z(()=>{const o=a()||null;var _=va;o!==u&&(f&&(o===null?Re(f,()=>{f=null,v=null}):o===v?_e(f):X(f)),o&&o!==v&&(f=K(()=>{if(s=A?s:document.createElementNS(_,o),Ze(s,s),t){A&&Ra(o)&&s.append(document.createComment(""));var g=A?_a(s):s.appendChild(ga());A&&(g===null?F(!1):J(g)),t(s,g)}ue.nodes_end=s,c.before(s)})),u=o,u&&(v=u))},da),n&&(F(!0),J(c))}function qa(e,a){var r=void 0,t;Z(()=>{r!==(r=a())&&(t&&(X(t),t=null),r&&(t=K(()=>{Me(()=>r(e))})))})}function Fe(e){var a,r,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(a=0;a<i;a++)e[a]&&(r=Fe(e[a]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}function Xa(){for(var e,a,r=0,t="",i=arguments.length;r<i;r++)(e=arguments[r])&&(a=Fe(e))&&(t&&(t+=" "),t+=a);return t}function Ka(e){return typeof e=="object"?Xa(e):e??""}const Ae=[...` 	
\r\f \v\uFEFF`];function Ja(e,a,r){var t=e==null?"":""+e;if(r){for(var i in r)if(r[i])t=t?t+" "+i:i;else if(t.length)for(var l=i.length,n=0;(n=t.indexOf(i,n))>=0;){var u=n+l;(n===0||Ae.includes(t[n-1]))&&(u===t.length||Ae.includes(t[u]))?t=(n===0?"":t.substring(0,n))+t.substring(u+1):n=u}}return t===""?null:t}function Ee(e,a=!1){var r=a?" !important;":";",t="";for(var i in e){var l=e[i];l!=null&&l!==""&&(t+=" "+i+": "+l+r)}return t}function le(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Za(e,a){if(a){var r="",t,i;if(Array.isArray(a)?(t=a[0],i=a[1]):t=a,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,n=0,u=!1,v=[];t&&v.push(...Object.keys(t).map(le)),i&&v.push(...Object.keys(i).map(le));var s=0,c=-1;const m=e.length;for(var f=0;f<m;f++){var o=e[f];if(u?o==="/"&&e[f-1]==="*"&&(u=!1):l?l===o&&(l=!1):o==="/"&&e[f+1]==="*"?u=!0:o==='"'||o==="'"?l=o:o==="("?n++:o===")"&&n--,!u&&l===!1&&n===0){if(o===":"&&c===-1)c=f;else if(o===";"||f===m-1){if(c!==-1){var _=le(e.substring(s,c).trim());if(!v.includes(_)){o!==";"&&f++;var g=e.substring(s,f).trim();r+=" "+g+";"}}s=f+1,c=-1}}}}return t&&(r+=Ee(t)),i&&(r+=Ee(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Qa(e,a,r,t,i,l){var n=e.__className;if(A||n!==r||n===void 0){var u=Ja(r,t,l);(!A||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):a?e.className=u:e.setAttribute("class",u)),e.__className=r}else if(l&&i!==l)for(var v in l){var s=!!l[v];(i==null||s!==!!i[v])&&e.classList.toggle(v,s)}return l}function se(e,a={},r,t){for(var i in r){var l=r[i];a[i]!==l&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,l,t))}}function er(e,a,r,t){var i=e.__style;if(A||i!==a){var l=Za(a,t);(!A||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=a}else t&&(Array.isArray(t)?(se(e,r==null?void 0:r[0],t[0]),se(e,r==null?void 0:r[1],t[1],"important")):se(e,r,t));return t}function de(e,a,r){if(e.multiple){if(a==null)return;if(!Le(a))return ha();for(var t of e.options)t.selected=a.includes(Se(t));return}for(t of e.options){var i=Se(t);if(ba(i,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function ar(e,a){let r=!0;Me(()=>{a&&de(e,$e(a),r),r=!1;var t=new MutationObserver(()=>{var i=e.__value;de(e,i)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Se(e){return"__value"in e?e.__value:e.value}const G=Symbol("class"),q=Symbol("style"),Ve=Symbol("is custom element"),Ye=Symbol("is html");function Ne(e){if(A){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;O(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var i=e.checked;O(e,"checked",null),e.checked=i}}};e.__on_r=r,Ea(r),Ba()}}function rr(e,a){a?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function O(e,a,r,t){var i=Ue(e);A&&(i[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||i[a]!==(i[a]=r)&&(a==="loading"&&(e[ka]=r),r==null?e.removeAttribute(a):typeof r!="string"&&je(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function tr(e,a,r,t,i=!1){var l=Ue(e),n=l[Ve],u=!l[Ye];let v=A&&n;v&&F(!1);var s=a||{},c=e.tagName==="OPTION";for(var f in a)f in r||(r[f]=null);r.class?r.class=Ka(r.class):r[G]&&(r.class=null),r[q]&&(r.style??(r.style=null));var o=je(e);for(const h in r){let b=r[h];if(c&&h==="value"&&b==null){e.value=e.__value="",s[h]=b;continue}if(h==="class"){var _=e.namespaceURI==="http://www.w3.org/1999/xhtml";Qa(e,_,b,t,a==null?void 0:a[G],r[G]),s[h]=b,s[G]=r[G];continue}if(h==="style"){er(e,b,a==null?void 0:a[q],r[q]),s[h]=b,s[q]=r[q];continue}var g=s[h];if(b!==g){s[h]=b;var m=h[0]+h[1];if(m!=="$$")if(m==="on"){const y={},T="$$"+h;let E=h.slice(2);var w=Ha(E);if(Oa(E)&&(E=E.slice(0,-7),y.capture=!0),!w&&g){if(b!=null)continue;e.removeEventListener(E,s[T],y),s[T]=null}if(b!=null)if(w)e[`__${E}`]=b,Ma([E]);else{let $=function(M){s[h].call(this,M)};s[T]=La(E,e,$,y)}else w&&(e[`__${E}`]=void 0)}else if(h==="style")O(e,h,b);else if(h==="autofocus")$a(e,!!b);else if(!n&&(h==="__value"||h==="value"&&b!=null))e.value=e.__value=b;else if(h==="selected"&&c)rr(e,b);else{var d=h;u||(d=Pa(d));var k=d==="defaultValue"||d==="defaultChecked";if(b==null&&!n&&!k)if(l[h]=null,d==="value"||d==="checked"){let y=e;const T=a===void 0;if(d==="value"){let E=y.defaultValue;y.removeAttribute(d),y.defaultValue=E,y.value=y.__value=T?E:null}else{let E=y.defaultChecked;y.removeAttribute(d),y.defaultChecked=E,y.checked=T?E:!1}}else e.removeAttribute(h);else k||o.includes(d)&&(n||typeof b!="string")?e[d]=b:typeof b!="function"&&O(e,d,b)}}}return v&&F(!0),s}function xe(e,a,r=[],t,i=!1,l=pa){const n=r.map(l);var u=void 0,v={},s=e.nodeName==="SELECT",c=!1;Z(()=>{var f=a(...n.map(p));tr(e,u,f,t,i),c&&s&&"value"in f&&de(e,f.value,!1);for(let _ of Object.getOwnPropertySymbols(v))f[_]||X(v[_]);for(let _ of Object.getOwnPropertySymbols(f)){var o=f[_];_.description===ma&&(!u||o!==u[_])&&(v[_]&&X(v[_]),v[_]=K(()=>qa(e,()=>o)))}u=f}),s&&ar(e,()=>u.value),c=!0}function Ue(e){return e.__attributes??(e.__attributes={[Ve]:e.nodeName.includes("-"),[Ye]:e.namespaceURI===wa})}var Te=new Map;function je(e){var a=Te.get(e.nodeName);if(a)return a;Te.set(e.nodeName,a=[]);for(var r,t=e,i=Element.prototype;i!==t;){r=Aa(t);for(var l in r)r[l].set&&a.push(l);t=ya(t)}return a}function Ce(e,a,r=a){var t=Sa();Da(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=ne(e)?oe(l):l,r(l),t&&l!==(l=a())){var n=e.selectionStart,u=e.selectionEnd;e.value=l??"",u!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(u,e.value.length))}}),(A&&e.defaultValue!==e.value||$e(a)==null&&e.value)&&r(ne(e)?oe(e.value):e.value),Na(()=>{var i=a();ne(e)&&i===oe(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ne(e){var a=e.type;return a==="number"||a==="range"}function oe(e){return e===""?null:+e}const ir=!0,Er=Object.freeze(Object.defineProperty({__proto__:null,prerender:ir},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const lr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var sr=Qe("<svg><!><!></svg>");function nr(e,a){const r=ce(a,["children","$$slots","$$events","$$legacy"]),t=ce(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Pe(a,!1);let i=V(a,"name",8,void 0),l=V(a,"color",8,"currentColor"),n=V(a,"size",8,24),u=V(a,"strokeWidth",8,2),v=V(a,"absoluteStrokeWidth",8,!1),s=V(a,"iconNode",24,()=>[]);const c=(...g)=>g.filter((m,w,d)=>!!m&&d.indexOf(m)===w).join(" ");Be();var f=sr();xe(f,(g,m)=>({...lr,...t,width:n(),height:n(),stroke:l(),"stroke-width":g,class:m}),[()=>v()?Number(u())*24/Number(n()):u(),()=>c("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)]);var o=C(f);Ua(o,1,s,Va,(g,m)=>{var w=xa(()=>Ta(p(m),2));let d=()=>p(w)[0],k=()=>p(w)[1];var h=ve(),b=ge(h);Ga(b,d,!0,(y,T)=>{xe(y,()=>({...k()}))}),L(g,h)});var _=x(o);De(_,a,"default",{}),I(f),L(e,f),He()}function or(e,a){const r=ce(a,["children","$$slots","$$events","$$legacy"]),t=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];nr(e,za({name:"settings"},()=>r,{get iconNode(){return t},children:(i,l)=>{var n=ve(),u=ge(n);De(u,a,"default",{}),L(i,n)},$$slots:{default:!0}}))}var fr=Y('<div class="mb-4 p-4 rounded-md border border-gray-600 bg-gray-700"><label class="block text-sm mb-1"> </label> <input type="range" min="0" max="1" step="0.01" class="w-full mb-3"/> <label class="block text-sm mb-1"> </label> <input type="range" min="0.5" max="8" step="0.1" class="w-full"/></div>'),ur=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Cleaned</h2> <img alt="Cleaned" class="rounded border border-gray-500"/> <a download="cleaned.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open In…</a></div>'),cr=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Outer Outline</h2> <img alt="Outer Outline" class="rounded border border-gray-500"/> <a download="outer.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open In…</a></div>'),dr=Y('<div><h2 class="text-xl font-semibold mb-2 text-pink-400">Full Detail</h2> <img alt="Full Detail" class="rounded border border-gray-500"/> <a download="full.png" class="mt-2 inline-block text-pink-400 hover:underline">Download / Open In…</a></div>'),vr=Y('<main class="min-h-screen bg-gray-800 text-white px-4 py-8"><div class="relative max-w-xl mx-auto"><button class="absolute top-0 right-0 p-2"><!></button> <div class="flex items-center mb-1"><img alt="Inkerly logo" class="h-10 w-10 rounded-full border-2 border-white mr-2 p-1"/> <h1 class="text-3xl font-bold text-pink-500">Inkerly</h1></div> <p class="text-gray-300 mb-6">Your portable tattoo stencil studio</p> <!> <input type="file" accept="image/*" class="block w-full text-sm mb-4 text-white bg-gray-700 border border-gray-600 rounded-lg p-2 cursor-pointer file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-600 file:text-white hover:file:bg-pink-500"/> <button class="w-full text-white bg-pink-600 hover:bg-pink-500 font-semibold py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"> </button> <div class="mt-8 space-y-8"><!> <!> <!></div></div></main>'),_r=Y('<div class="flex items-center justify-center min-h-screen bg-gray-800 text-white"><div class="text-center"><svg class="animate-spin h-12 w-12 text-pink-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> <p class="text-pink-400 font-medium">Loading Inkerly stencil engine…</p></div></div>');function Sr(e,a){Pe(a,!1);let r,t=P(null),i=P(.5),l=P(4),n=P(!1),u=P(!1),v=P(!1),s=P({cleaned:"",outer:"",full:""});ea(async()=>{r=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"}),await r.loadPackage(["opencv-python"]),z(v,!0)});async function c(){if(!p(t)||!r)return;z(n,!0);const m=await p(t).arrayBuffer();r.FS.writeFile("in.png",new Uint8Array(m));const w=`
import cv2
import numpy as np

image = cv2.imread('in.png')
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

_, mask = cv2.threshold(gray, 250, 255, cv2.THRESH_BINARY)
mask_inv = cv2.bitwise_not(mask)
white_bg = np.full(image.shape, 255, dtype=np.uint8)
fg = cv2.bitwise_and(image, image, mask=mask_inv)
cleaned = cv2.add(fg, cv2.bitwise_and(white_bg, white_bg, mask=mask))
_, buf_cleaned = cv2.imencode('.png', cleaned)
with open('out_cleaned.png', 'wb') as f: f.write(buf_cleaned)

_, bw = cv2.threshold(gray, int(${p(i)} * 255), 255, cv2.THRESH_BINARY_INV)
contours_ext, _ = cv2.findContours(bw, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
contours_all, _ = cv2.findContours(bw, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

def draw(contours, thickness):
    scale = 3
    h, w = gray.shape
    canvas = np.ones((h*scale, w*scale), dtype=np.uint8) * 255
    scaled_contours = [c * scale for c in contours]
    cv2.drawContours(canvas, scaled_contours, -1, 0, max(1, int(thickness + 0.5)))
    canvas = cv2.resize(canvas, (w, h), interpolation=cv2.INTER_AREA)
    _, buf = cv2.imencode('.png', canvas)
    return buf.tobytes()

outer = draw(contours_ext, ${p(l)})
full = draw(contours_all, ${p(l)})

with open('out_outer.png', 'wb') as f: f.write(outer)
with open('out_full.png', 'wb') as f: f.write(full)
`;await r.runPythonAsync(w),["cleaned","outer","full"].forEach(d=>{const k=r.FS.readFile(`out_${d}.png`);Ia(s,p(s)[d]=URL.createObjectURL(new Blob([k],{type:"image/png"})))}),z(n,!1)}Be();var f=ve(),o=ge(f);{var _=m=>{var w=vr(),d=C(w),k=C(d),h=C(k);or(h,{class:"w-6 h-6 text-pink-500 hover:text-pink-400"}),I(k);var b=x(k,2),y=C(b);Ca(2),I(b);var T=x(b,4);{var E=N=>{var S=fr(),R=C(S),D=C(R);I(R);var ee=x(R,2);Ne(ee);var ae=x(ee,2),Ke=C(ae);I(ae);var me=x(ae,2);Ne(me),I(S),j((U,Je)=>{te(D,`Stencil Detail: ${U??""}%`),te(Ke,`Line Thickness: ${Je??""}px`)},[()=>Math.round(p(i)*100),()=>p(l).toFixed(1)],Ie),Ce(ee,()=>p(i),U=>z(i,U)),Ce(me,()=>p(l),U=>z(l,U)),L(N,S)};W(T,N=>{p(u)&&N(E)})}var $=x(T,2),M=x($,2),Q=C(M,!0);I(M);var he=x(M,2),be=C(he);{var We=N=>{var S=ur(),R=x(C(S),2),D=x(R,2);I(S),j(()=>{O(R,"src",p(s).cleaned),O(D,"href",p(s).cleaned)}),L(N,S)};W(be,N=>{p(s).cleaned&&N(We)})}var pe=x(be,2);{var Ge=N=>{var S=cr(),R=x(C(S),2),D=x(R,2);I(S),j(()=>{O(R,"src",p(s).outer),O(D,"href",p(s).outer)}),L(N,S)};W(pe,N=>{p(s).outer&&N(Ge)})}var qe=x(pe,2);{var Xe=N=>{var S=dr(),R=x(C(S),2),D=x(R,2);I(S),j(()=>{O(R,"src",p(s).full),O(D,"href",p(s).full)}),L(N,S)};W(qe,N=>{p(s).full&&N(Xe)})}I(he),I(d),I(w),j(()=>{O(y,"src",`${Fa??""}/icon.png`),M.disabled=!p(t)||p(n),te(Q,p(n)?"Processing...":"Generate Stencils")}),ie("click",k,()=>z(u,!p(u))),ie("change",$,N=>{var S;return z(t,((S=N.target.files)==null?void 0:S[0])??null)}),ie("click",M,c),L(m,w)},g=m=>{var w=_r();L(m,w)};W(o,m=>{p(v)?m(_):m(g,!1)})}L(e,f),He()}export{Sr as component,Er as universal};
